<div class="container mt-md-5">
    <div class="row base" *ngIf="job$ | async as job">
        <div class="col-12 col-md order-11 order-md-1 base__subnavbar">
            <div class="base__sticky-panel">
                <div class="d-flex d-sm-block flex-column-reverse">
                    <ul class="pagination pagination--block pagination-alv d-flex">
                        <li class="page-item">
                            <a class="page-link" routerLink="/job-search">{{'job-detail.back' | translate}}</a>
                        </li>
                    </ul>

                    <hr class="visible-print-block d-none"/>

                    <div class="alv-logo-box logo-box logo-box__company flex-height md-whiteframe-1dp" >
                        <div class="detail__content" *ngIf="job.jobContent.company as company">
                            <address>
                                <strong>{{ company.name }}</strong>
                                <br>

                                {{ company.street }} {{ company.houseNumber }}
                                <br>

                                {{ company.postalCode }} {{ company.city }}
                            </address>

     <!--   JR2-1180
                            <ng-container *ngIf="company.phone">
                                <a href="tel:{{company.phone}}">{{ company.phone | jr2PhoneNumber }}</a>
                                <br>
                            </ng-container>

                            <ng-container *ngIf="company.email">
                                <a href="mailto:{{ company.email }}">{{ company.email }}</a>
                                <br>
                            </ng-container>

                            <a href="{{ company.website }}" target="{{ job.id }}">
                                {{ company.website | truncateCharacters:30 }}
                            </a>
                            -->
                        </div>

                        <div *ngIf="job.jobContent.publicContact as contact">
                            <div class="detail__content">
                                <strong>{{'job-detail.contactPerson' | translate}}</strong>
                                <br>

                                <span *ngIf="contact.salutation">{{ 'global.contactPerson.salutation.' + contact.salutation | translate }}</span>
                                {{ contact.firstName }}&nbsp;{{ contact.lastName }}
                                <br>

                                <ng-container *ngIf="contact.phone">
                                    <a href="tel:{{contact.phone}}">
                                        {{ contact.phone | jr2PhoneNumber }}
                                    </a>
                                    <br>
                                </ng-container>

                                <a *ngIf="contact.email" href="mailto:{{ contact.email }}">
                                    {{ contact.email }}
                                </a>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="jobCenter$ | async as jobCenter" class="order-sm-2 alv-logo-box logo-box logo-box__company flex-height md-whiteframe-1dp">
                        <div class="detail__content">
                            <address *ngIf="jobCenter.address">
                                <strong>{{ 'job-detail.reference.responsible-job-center' | translate }}</strong>
                                <br>

                                {{jobCenter.address.name}}<ng-container *ngIf="jobCenter.address.street || jobCenter.address.houseNumber">, {{jobCenter.address.street}} {{jobCenter.address.houseNumber}}</ng-container>
                                <br>

                                {{jobCenter.address.zipCode}} {{jobCenter.address.city}}
                                <br>

                                {{'job-detail.reference.phone' | translate}} <a href="tel:{{jobCenter.phone}}">{{jobCenter.phone | jr2PhoneNumber}}</a>
                            </address>

                            <ng-container *ngIf="job.stellennummerAvam || job.stellennummerEgov">
                                <strong>{{'job-detail.reference.job-id' | translate}}:</strong>
                                <br>

                                <ng-container *ngIf="job.stellennummerAvam">AVAM: {{job.stellennummerAvam}} <br></ng-container>

                                <ng-container *ngIf="job.stellennummerEgov">Job-Room: {{job.stellennummerEgov}}</ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="jobDescription$ | async as jobDescription" class="col-12 col-md-8 order-3 base__content">
            <ngb-alert *ngIf="isExternalJobDisclaimerShown(job)" [type]="'info'" (close)="externalJobDisclaimerClosed = true"
                       class="d-print-none">
                {{'job-detail.external-job-disclaimer' | translate}}
            </ngb-alert>

            <div class="detail__title">
                <h2 class="text--light" [innerHTML]="jobDescription.title | safeHtml"></h2>
                <span class="text--primary-color">{{ job.jobContent.company.name }}</span>
                <small class="detail__date" *ngIf="job.publication.startDate">
                    {{'job-detail.onlineSince' | translate}} {{ job.publication.startDate | jr2Date }}
                </small>
            </div>

            <div class="detail__content">
                <jr2-job-locality [location]="job.jobContent.location"></jr2-job-locality>
                <span class="badge badge-gray">{{[job.jobContent.employment.workloadPercentageMin, job.jobContent.employment.workloadPercentageMax] | workingTimeRange}}</span>

                <span *ngIf="job.jobContent.employment.startDate" class="badge badge-yellow" translate="job-detail.startDate"
                      [translateParams]="{date: job.jobContent.employment.startDate | jr2Date}"></span>
                <span *ngIf="!job.jobContent.employment.startDate && job.jobContent.employment.immediately != null" class="badge badge-yellow">
                    {{'job-detail.startsImmediately.' +  job.jobContent.employment.immediately | translate}}
                </span>

                <span *ngIf="job.jobContent.employment.permanent" class="badge badge-green">{{'job-search.job-search-list-item.badge.permanent' | translate}}</span>
                <span *ngIf="!job.jobContent.employment.permanent && !!job.jobContent.employment.endDate" class="badge badge-yellow" translate="job-detail.endDate"
                      [translateParams]="{date: job.jobContent.employment.endDate | jr2Date}"></span>
                <span *ngIf="!job.jobContent.employment.permanent && !job.jobContent.employment.endDate" class="badge badge-yellow">{{'job-search.job-search-list-item.badge.temporary' | translate}}</span>
                <span *ngIf="job.reportingObligation" class="badge badge-danger">{{'job-search.job-search-list-item.badge.restricted' | translate}}</span>
            </div>

            <!-- job description -->
            <div *ngIf="jobDescription.description" class="detail__content">
                <markdown [data]="jobDescription.description"></markdown>
            </div>

            <!-- Languages -->
            <jr2-languages [languages]="job.jobContent.languageSkills"
                           [itemClass]="'content__item content__item--bullet'"
                           [titleClass]="'detail__content__title detail__content__title--light'"></jr2-languages>

            <br/>
            <!-- Application -->
            <div *ngIf="job.jobContent.applyChannel" class="detail__content">
                <h4 class="detail__content__title detail__content__title--light">{{ 'job-detail.application.title' | translate }}</h4>

                <div *ngIf="job.jobContent.applyChannel.formUrl" class="content__item content__item--bullet">
                    <strong>{{ 'job-detail.application.online' | translate }}</strong>
                    <span>
                        <a href="{{ job.jobContent.applyChannel.formUrl }}">{{ 'job-publication-details.application.online-form' | translate}}</a>
                    </span>
                </div>
                <div *ngIf="job.jobContent.applyChannel.emailAddress" class="content__item content__item--bullet">
                    <strong>{{ 'job-detail.application.email' | translate }}</strong>
                    <span>
                        <a href="mailto:{{job.jobContent.applyChannel.emailAddress}}">{{job.jobContent.applyChannel.emailAddress}}</a>
                    </span>
                </div>
                <div *ngIf="job.jobContent.applyChannel.phoneNumber" class="content__item content__item--bullet">
                    <strong>{{ 'job-detail.application.phone' | translate }}</strong>
                    <span><a href="tel:{{job.jobContent.applyChannel.phoneNumber}}">
                        {{(job.jobContent.applyChannel.phoneNumber) | jr2PhoneNumber}}
                    </a></span>
                </div>
                <div *ngIf="job.jobContent.applyChannel.mailAddress" class="content__item content__item--bullet">
                    <strong>{{ 'job-detail.application.mail' | translate }}</strong>
                    <span>{{ job.jobContent.applyChannel.mailAddress }}</span>
                </div>
            </div>

            <!-- /job description -->

        </div>

        <div class="col-12 col-md order-12 base__related">
            <div class="base__sticky-panel">
                <jr2-details-page-pagination [currentItem]="job"
                                             [itemsList]="jobList$ | async"
                                             [feature]="'job-detail'"
                                             [totalSize]="jobListTotalSize$ | async">
                </jr2-details-page-pagination>

                <p>
                    <a *ngIf="job.jobContent.applyChannel?.formUrl"
                       class="btn btn-primary btn-block btn-sm"
                       href="{{job.jobContent.applyChannel?.formUrl}}" target="{{job.id}}">
                        {{'job-detail.action.applyNow' | translate}}
                    </a>
                    <a *ngIf="job.jobContent.externalUrl"
                       class="btn btn-secondary btn-block btn-sm"
                       href="{{job.jobContent.externalUrl}}" target="{{job.id}}">
                        {{'job-detail.action.showExternalPage' | translate}}
                    </a>
                </p>

                <ul class="nav filter-nav flex-column">
                    <!--<li class="nav-item">-->
                    <!--<a class="nav-link" href="#"><i class="fa fa-star-o"-->
                    <!--aria-hidden="true"></i>-->
                    <!--{{'job-detail.action.saveJob' | translate}}</a>-->
                    <!--</li>-->
                    <li class="nav-item">
                        <a class="nav-link" #copyToClipboard ngxClipboard [cbContent]="getJobUrl()" (cbOnSuccess)="onCopyLink()"
                           [ngbTooltip]="'global.messages.tooltip.link-copy.success' | translate" triggers="manual">
                            <span class="fa fa-share" aria-hidden="true"></span>
                            {{'job-detail.action.copyLink' | translate}}</a>
                    </li>
                    <!--<li class="nav-item">-->
                    <!--<a class="nav-link" href="#"><i class="fa fa-envelope"-->
                    <!--aria-hidden="true"></i>-->
                    <!--{{'job-detail.action.sendEmail' | translate}}</a>-->
                    <!--</li>-->
                    <li class="nav-item d-none d-md-block">
                        <a class="nav-link" (click)="printJob()">
                            <span class="fa fa-print" aria-hidden="true"></span>
                            {{'job-detail.action.print' | translate}}</a>
                    </li>
                    <!--<li class="nav-item">-->
                    <!--<a class="nav-link" href="#"><i class="fa fa-file-pdf-o"-->
                    <!--aria-hidden="true"></i>-->
                    <!--{{'job-detail.action.savePdf' | translate}}</a>-->
                    <!--</li>-->
                </ul>
            </div>
        </div>
    </div>
</div>
